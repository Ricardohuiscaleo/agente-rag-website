const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/supabase.D-cBqalA.js","_astro/_commonjsHelpers.D6-XlEtG.js","_astro/preload-helper.BlTxHScW.js"])))=>i.map(i=>d[i]);
import{_ as i}from"./preload-helper.BlTxHScW.js";const c=()=>{const r=document.getElementById("logout-button");r&&r.addEventListener("click",async()=>{try{const{signOut:e}=await i(async()=>{const{signOut:o}=await import("./supabase.D-cBqalA.js");return{signOut:o}},__vite__mapDeps([0,1,2]));await e(),window.location.href="/"}catch(e){console.error("Error al cerrar sesiÃ³n:",e)}})},l=()=>{const r=document.getElementById("create-user-form"),e=document.getElementById("result-message");r&&r.addEventListener("submit",async o=>{o.preventDefault();try{const t=new FormData(r),n=t.get("email"),s=t.get("role"),a=await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,role:s})}),d=await a.json();if(a.ok&&d.success)e&&(e.classList.remove("hidden","bg-red-900/20","border-red-500/30","text-red-300"),e.classList.add("bg-green-900/20","border-green-500/30","text-green-300","p-4","rounded-lg"),e.textContent=`Usuario ${n} creado exitosamente con rol ${s}`,setTimeout(()=>{window.location.reload()},2e3)),r.reset();else throw new Error(d.error||"Error desconocido al crear el usuario")}catch(t){console.error("Error:",t),e&&(e.classList.remove("hidden","bg-green-900/20","border-green-500/30","text-green-300"),e.classList.add("bg-red-900/20","border-red-500/30","text-red-300","p-4","rounded-lg"),e.textContent=t instanceof Error?t.message:"Error al crear usuario")}})};document.addEventListener("DOMContentLoaded",()=>{c(),l()});
